# lab2
hamza farrukh
(3 Points) Explain how external interrupts work:

An external interrupt lets the microcontroller react instantly to a real-world event, like a button press, without wasting time constantly checking the pin. The GPIO pin is mapped to an EXTI line, which asserts an interrupt request when the chosen edge (rising/falling) occurs. The NVIC notices this request, pauses the main program, and jumps to a small Interrupt Service Routine (ISR) whose address is found in the interrupt vector table. Entering the ISR clears the interrupt’s pending state; the ISR performs a short action (e.g., toggle an LED) and must clear the EXTI pending flag at the peripheral to prevent re-entry loops. When the ISR exits, the CPU automatically restores registers it saved on entry and resumes the main loop right where it stopped.

(3 Points) Explain how timer interrupt works:

A timer interrupt is an internal event generated by a timer peripheral when its counter reaches a preset limit. The timer counts clock cycles derived from the MCU’s system clock, optionally slowed by a prescaler. When the counter equals the auto-reload register value, the timer sets an update interrupt flag that triggers the NVIC to run the corresponding Interrupt Service Routine (ISR). Inside the ISR, we perform a short task (such as changing the LED color) and clear the interrupt flag before returning. Unlike external interrupts that respond to external events, timer interrupts occur at predictable, periodic intervals determined by the timer configuration.

(2 Points) Calculate the timer frequency. Show the process:

For a 1 Hz timer interrupt (period = 1 second) using TIM4 -
  The timer interrupt frequency is given by:
      f_INT = f_CLK / ((PSC + 1) * (ARR + 1))

Assuming the microcontroller clock (f_CLK) is 16 MHz:
Choose: PSC = 15999, ARR = 999
Then: f_INT = 16,000,000 / ((15,999 + 1) * (999 + 1)) = 1.0 Hz
Result: Timer 4 generates one interrupt every 1 second.
